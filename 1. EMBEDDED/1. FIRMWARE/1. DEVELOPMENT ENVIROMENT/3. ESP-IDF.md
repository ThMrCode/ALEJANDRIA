ESP-IDF es un `SDK`, que gestiona entornos de desarrollo para el build y upload de la familia espressif. Además de proporcionar el framework, gestiona la configuración interna del MCU, la configuración de las particiones, y etc. La configuración del entorno se guarda en sdkconfig

idf.py
	build
	-p PORT flash
	clean o fullclean
	set-target
	monitor
	menuconfig
	create-project

En espressif todo es modular, se trabaja por componentes, que se añaden fácil al proyecto, desde https://components.espressif.com/
Al crear un proyecto se crea por defecto el componente main, es el principal, los demas se crearan o aniadiran bajo la carpeta componentes
la estructura de un componente es /include para los .h, y los .c y cmake en la raiz del componente, un componente engloba todo dentro de su carpeta de componente, y todos esos .h y .c en compilacion se reducen a un solo libComponente.a asi es como los reconoce el sdk, y asi mide los recursos, por componentes (carpetas)

Los archivos CMake de cada componente se modifican manualmente
El archivo Cmake del componente sera el responsable de la generacion de su .a, en el se deben resolver las dependencias entre mis componentes tanto entre los generados manualmente como los que use del espidf o del registro, (exepto los fundamentales, los fundamentales como freeRTOS se incluyen por defecto), todo esto con require

Si se desea que las dependencias a un componente se resuelvan de manera automatica por espidf, este componente debe ser agregado como dependencia, aprender a crear dependencias
idf.py
	add-dependency

los archivos kconfig son el puente entre las configuracion CONFIGURACION_X del menuconfig y las macros CONFIG_CONFIGURACION_X del codigo

idf.py create-component -C components mi_componente



---
### COMPONENTS
Todo el firmware de esp-idf se trabaja por componentes, un componente es una carpeta con código y archivos de configuración, lo que define al componente es tener el archivo CMakeLists.txt en dicha carpeta, así es como esp-idf lo reconoce como componente, además sigue determinado formato:

```
│   └── my_component/
│       ├── CMakeLists.txt
│       ├── Kconfig         ← Opcional, para configuración desde menuconfig
│       ├── include/        ← Headers públicos (*.h)
│       │   └── my_component.h
│       ├── src/            ← Archivos fuente (*.c / *.cpp)
│       │   └── my_component.c
│       └── component.yml   ← Opcional, usado con el "IDF Component Manager"
```

La estructura de los archivos C/C++ y Headers puede variar, pero se suele seguir el uso de carpetas include y src, lo importante es indicar su ubicación en el CMakeLists

```
idf_component_register(
  SRCS src
  INCLUDE_DIRS "include"
  REQUIRES other_component
)
```

Las dependencias que requiera nuestro componente se resuelve escribiendo el nombre de su carpeta en `REQUIRES`, el `idf.py` busca dicha carpeta en 3 lugares posibles

```
│       ├── Componentes del Framework, en la carpeta components del esp-idf
			ruta default C:\Espressif\frameworks\esp-idf-v5.4.1\components
			
│       ├── Componentes del Proyecto, en la carpeta components del proyecto
			ruta my-project-path\components
			
│       ├── Componentes agregados como dependencias con component.yml y 
			add-dependency, son descargados a la carpeta .dependencies por el
			comando add-dependency, ahi es donde los busca esp-idf, a su vez 
			si alguna de nuestras dependencias requiere otra, se agrega 
			tambien como otra carpeta en \.dependencies
			ruta my-project\.dependencies
```

El archivo `component.yml` permite especificar las dependencias del componente, sobre todo las dependencias externas, así al meter `idf.py reconfigure` el `idf.py` podrá leer todos los `component.yml` y asegurarse de que las dependencias especificadas en component.yml estén o bien en el framework, o el en proyecto o en `\.dependencies`, y si no están, las descarga a `\.dependencies`

El archivo `KConfig` es independiente, es solo tenerlo agregado o no, ya que cada que corramos `menuconfig`, `idf.py`, se encargara de buscarlo en cada componente incluido en el proyecto, sea de los del framework, los locales, o los de dependencies, se definen opciones que en si, activan o desactivan macros del mismo nombre, o le dan valor.

Para inspeccionar el grafo de dependencias del proyecto

```
idf.py build --graph build/graph.dot
dot -Tpng build/graph.dot -o deps.png
```


Para añadir intellisence, hacer el c_cpp_properties.json


Para salir del monitor es Crl + t + Crtl + x